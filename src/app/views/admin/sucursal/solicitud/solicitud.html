<div class="container mx-auto px-4 py-8">
      @if (aceptada) {
      <div class="p-3 mb-4 text-sm text-green-800 bg-green-50 rounded-lg dark:bg-green-900/30 dark:text-green-400">
        <span class="font-medium">Se a aceptado la solicitud correctamente</span>
      </div>
      }
      @if (rechazada) {
      <div class="p-3 mb-4 text-sm text-green-800 bg-green-50 rounded-lg dark:bg-green-900/30 dark:text-green-400">
        <span class="font-medium">Se a rechazado la solicitud correctamente</span>
      </div>
      }
  <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-black">Gestión de Solicitudes de Comercio</h1>
      <p class="text-gray-600 dark:text-black-300 mt-2">Administra las solicitudes de registro de comercios</p>
    </div>

    <div class="flex gap-4 mt-4 md:mt-0">
      <div class="relative">
        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
          <fa-icon [icon]="faSearch" class="text-gray-500"></fa-icon>
        </div>
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="searchRequests()"
          class="pl-10 p-2.5 border border-gray-300 rounded-lg bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          placeholder="Buscar solicitudes..."
        >
      </div>
    </div>
  </div>

  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
          <tr>
            <th scope="col" class="px-6 py-3">Logo</th>
            <th scope="col" class="px-6 py-3">Nombre del Comercio</th>
            <th scope="col" class="px-6 py-3">NIT</th>
            <th scope="col" class="px-6 py-3">Email</th>
            <th scope="col" class="px-6 py-3">Teléfono</th>
            <th scope="col" class="px-6 py-3">Documentos</th>
            <th scope="col" class="px-6 py-3">Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (request of filteredRequests; track request.id) {
            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
              <!-- Columna del Logo -->
              <td class="px-6 py-4">
                @if (request.logo) {
                  <button 
                    (click)="viewLogo(request.logo)"
                    class="flex items-center justify-center w-12 h-12 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
                    title="Ver logo">
                    <fa-icon [icon]="faImage" class="text-blue-600"></fa-icon>
                  </button>
                } @else {
                  <span class="text-gray-400 text-xs">Sin logo</span>
                }
              </td>
              
              <td class="px-6 py-4 font-medium text-gray-900 dark:text-white">
                {{ request.name }}
              </td>
              <td class="px-6 py-4">{{ request.nit }}</td>
              <td class="px-6 py-4">{{ request.email }}</td>
              <td class="px-6 py-4">{{ request.phoneNumber }}</td>
              
              <!-- Columna de Documentos -->
              <td class="px-6 py-4">
                @if (request.file) {
                  <button 
                    (click)="downloadFile(request.file, 'documentos_' + request.nit + '.pdf')"
                    class="flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors"
                    title="Descargar documentos">
                    <fa-icon [icon]="faDownload"></fa-icon>
                    Descargar
                  </button>
                } @else {
                  <span class="text-gray-400 text-xs">Sin documentos</span>
                }
              </td>
              
              <td class="px-6 py-4 flex gap-2">
                <button 
                  (click)="acceptRequest(request)"
                  class="px-3 py-1 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors">
                  <fa-icon [icon]="faCheckCircle"></fa-icon>
                  Aceptar
                </button>
                <button 
                  (click)="rejectRequest(request)"
                  class="px-3 py-1 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors">
                  <fa-icon [icon]="faTimesCircle"></fa-icon>
                  Rechazar
                </button>
              </td>
            </tr>
          }
          @empty {
            <tr>
              <td colspan="7" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">
                No se encontraron solicitudes nuevas
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>